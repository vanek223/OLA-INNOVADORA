// Translations for the website
const translations = {
    ru: {
        // Header
        companyName: "Ola Innovadora",
        navApartments: "Апартаменты",
        navAbout: "О нас",
        navContact: "Связь",
        
        // Hero
        heroTitle: "Апартаменты вашей мечты на Тенерифе",
        heroSubtitle: "Найдите идеальное жильё для вашего отдыха на солнечном острове",
        
        // Filters
        filterLocation: "Локация",
        filterAllLocations: "Все районы",
        filterGuests: "Гости",
        filterAnyGuests: "Любое",
        filterPrice: "Цена за ночь",
        filterAnyPrice: "Любая",
        filterButton: "Найти",
        
        // Locations
        locationLosCristianos: "Лос-Кристианос",
        locationPlayaAmericas: "Плайя-де-лас-Америкас",
        locationCostaAdeje: "Коста-Адехе",
        locationPuertoCruz: "Пуэрто-де-ла-Крус",
        
        // Apartments
        apt1Name: "Уютные апартаменты с видом на океан",
        apt2Name: "Студия рядом с пляжем",
        apt3Name: "Роскошные апартаменты VIP класса",
        apt4Name: "Современная квартира в центре",
        apt5Name: "Семейные апартаменты с террасой",
        apt6Name: "Романтическая студия для двоих",
        
        // Features
        bedrooms: "спальни",
        bedroom: "спальня",
        guests: "гостей",
        upTo: "До",
        pool: "Бассейн",
        jacuzzi: "Джакузи",
        parking: "Парковка",
        kitchen: "Кухня",
        balcony: "Балкон",
        wifi: "Wi-Fi",
        oceanView: "Вид на океан",
        
        // Badges
        popular: "Популярное",
        premium: "Премиум",
        
        // Price
        perNight: "/ ночь",
        pricePerNight: "Цена за ночь",
        
        // Buttons
        bookButton: "Забронировать",
        bookButtonLarge: "Забронировать апартаменты",
        backToList: "Вернуться к списку",
        
        // About section
        aboutTitle: "Почему выбирают нас",
        aboutReliability: "Надёжность",
        aboutReliabilityText: "Все апартаменты проверены и подтверждены",
        aboutBestPrices: "Лучшие цены",
        aboutBestPricesText: "Бронируйте напрямую без комиссии",
        aboutSupport: "Поддержка 24/7",
        aboutSupportText: "Всегда на связи в Telegram",
        aboutLocations: "Лучшие локации",
        aboutLocationsText: "Апартаменты в популярных районах Тенерифе",
        
        // Contact section
        contactTitle: "Свяжитесь с нами",
        contactSubtitle: "Есть вопросы? Напишите нам в удобном мессенджере!",
        telegram: "Telegram",
        whatsapp: "WhatsApp",
        instagram: "Instagram",
        
        // Footer
        footerText: "© 2024 Ola Innovadora. Все права защищены.",
        
        // Modal
        modalTitle: "Забронировать апартаменты",
        modalDescription: "Для бронирования свяжитесь с нами через удобный для вас мессенджер:",
        modalTelegram: "Написать в Telegram",
        modalWhatsApp: "Написать в WhatsApp",
        modalNote: "Упомяните название апартаментов при обращении",
        modalPriceLabel: "Цена:",
        
        // Apartment details
        detailsDescription: "Описание",
        detailsIncluded: "Что включено:",
        detailsLocation: "Расположение:",
        detailsBookingNote: "Свяжитесь с нами для уточнения дат и деталей",
        
        // Feature details
        featureComfortableBeds: "Удобные кровати",
        featureComfortableStudio: "Комфортная студия",
        featurePremiumInterior: "Премиум интерьер",
        featureIdealForFamily: "Идеально для семьи",
        featureIdealForCouple: "Идеально для пары",
        featureIdealForCompany: "Для большой компании",
        featureHighSpeed: "Высокоскоростной",
        featureSharedPool: "Общий бассейн",
        featureOnTerrace: "На террасе",
        featurePanoramicView: "Панорамный вид",
        featurePanoramicWindows: "Панорамные окна",
        featureMetersFromBeach: "200 метров"
    },
    
    en: {
        // Header
        companyName: "Ola Innovadora",
        navApartments: "Apartments",
        navAbout: "About",
        navContact: "Contact",
        
        // Hero
        heroTitle: "Your Dream Apartments in Tenerife",
        heroSubtitle: "Find the perfect accommodation for your vacation on the sunny island",
        
        // Filters
        filterLocation: "Location",
        filterAllLocations: "All areas",
        filterGuests: "Guests",
        filterAnyGuests: "Any",
        filterPrice: "Price per night",
        filterAnyPrice: "Any",
        filterButton: "Search",
        
        // Locations
        locationLosCristianos: "Los Cristianos",
        locationPlayaAmericas: "Playa de las Américas",
        locationCostaAdeje: "Costa Adeje",
        locationPuertoCruz: "Puerto de la Cruz",
        
        // Apartments
        apt1Name: "Cozy Apartment with Ocean View",
        apt2Name: "Studio Near the Beach",
        apt3Name: "Luxury VIP Apartment",
        apt4Name: "Modern City Center Apartment",
        apt5Name: "Family Apartment with Terrace",
        apt6Name: "Romantic Studio for Two",
        
        // Features
        bedrooms: "bedrooms",
        bedroom: "bedroom",
        guests: "guests",
        upTo: "Up to",
        pool: "Pool",
        jacuzzi: "Jacuzzi",
        parking: "Parking",
        kitchen: "Kitchen",
        balcony: "Balcony",
        wifi: "Wi-Fi",
        oceanView: "Ocean View",
        
        // Badges
        popular: "Popular",
        premium: "Premium",
        
        // Price
        perNight: "/ night",
        pricePerNight: "Price per night",
        
        // Buttons
        bookButton: "Book",
        bookButtonLarge: "Book Apartment",
        backToList: "Back to list",
        
        // About section
        aboutTitle: "Why Choose Us",
        aboutReliability: "Reliability",
        aboutReliabilityText: "All apartments are verified and confirmed",
        aboutBestPrices: "Best Prices",
        aboutBestPricesText: "Book directly without commission",
        aboutSupport: "24/7 Support",
        aboutSupportText: "Always available on Telegram",
        aboutLocations: "Best Locations",
        aboutLocationsText: "Apartments in popular areas of Tenerife",
        
        // Contact section
        contactTitle: "Contact Us",
        contactSubtitle: "Have questions? Write to us on your preferred messenger!",
        telegram: "Telegram",
        whatsapp: "WhatsApp",
        instagram: "Instagram",
        
        // Footer
        footerText: "© 2024 Ola Innovadora. All rights reserved.",
        
        // Modal
        modalTitle: "Book Apartment",
        modalDescription: "To book, contact us via your preferred messenger:",
        modalTelegram: "Message on Telegram",
        modalWhatsApp: "Message on WhatsApp",
        modalNote: "Mention the apartment name when contacting us",
        modalPriceLabel: "Price:",
        
        // Apartment details
        detailsDescription: "Description",
        detailsIncluded: "What's included:",
        detailsLocation: "Location:",
        detailsBookingNote: "Contact us to confirm dates and details",
        
        // Feature details
        featureComfortableBeds: "Comfortable beds",
        featureComfortableStudio: "Comfortable studio",
        featurePremiumInterior: "Premium interior",
        featureIdealForFamily: "Ideal for family",
        featureIdealForCouple: "Ideal for couple",
        featureIdealForCompany: "For large group",
        featureHighSpeed: "High-speed",
        featureSharedPool: "Shared pool",
        featureOnTerrace: "On terrace",
        featurePanoramicView: "Panoramic view",
        featurePanoramicWindows: "Panoramic windows",
        featureMetersFromBeach: "200 meters"
    },
    
    es: {
        // Header
        companyName: "Ola Innovadora",
        navApartments: "Apartamentos",
        navAbout: "Sobre nosotros",
        navContact: "Contacto",
        
        // Hero
        heroTitle: "Apartamentos de tus sueños en Tenerife",
        heroSubtitle: "Encuentra el alojamiento perfecto para tus vacaciones en la isla soleada",
        
        // Filters
        filterLocation: "Ubicación",
        filterAllLocations: "Todas las áreas",
        filterGuests: "Huéspedes",
        filterAnyGuests: "Cualquiera",
        filterPrice: "Precio por noche",
        filterAnyPrice: "Cualquiera",
        filterButton: "Buscar",
        
        // Locations
        locationLosCristianos: "Los Cristianos",
        locationPlayaAmericas: "Playa de las Américas",
        locationCostaAdeje: "Costa Adeje",
        locationPuertoCruz: "Puerto de la Cruz",
        
        // Apartments
        apt1Name: "Apartamento acogedor con vista al océano",
        apt2Name: "Estudio cerca de la playa",
        apt3Name: "Apartamento de lujo VIP",
        apt4Name: "Apartamento moderno en el centro",
        apt5Name: "Apartamento familiar con terraza",
        apt6Name: "Estudio romántico para dos",
        
        // Features bedrooms: "dormitorios",
        bedroom: "dormitorio",
        guests: "huéspedes",
        upTo: "Hasta",
        pool: "Piscina",
        jacuzzi: "Jacuzzi",
        parking: "Aparcamiento",
        kitchen: "Cocina",
        balcony: "Balcón",
        wifi: "Wi-Fi",
        oceanView: "Vista al mar",
        
        // Badges
        popular: "Popular",
        premium: "Premium",
        
        // Price
        perNight: "/ noche",
        pricePerNight: "Precio por noche",
        
        // Buttons
        bookButton: "Reservar",
        bookButtonLarge: "Reservar apartamento",
        backToList: "Volver a la lista",
        
        // About section
        aboutTitle: "Por qué elegirnos",
        aboutReliability: "Confiabilidad",
        aboutReliabilityText: "Todos los apartamentos están verificados y confirmados",
        aboutBestPrices: "Mejores precios",
        aboutBestPricesText: "Reserve directamente sin comisión",
        aboutSupport: "Soporte 24/7",
        aboutSupportText: "Siempre disponible en Telegram",
        aboutLocations: "Mejores ubicaciones",
        aboutLocationsText: "Apartamentos en áreas populares de Tenerife",
        
        // Contact section
        contactTitle: "Contáctenos",
        contactSubtitle: "¿Tiene preguntas? ¡Escríbanos en su mensajero preferido!",
        telegram: "Telegram",
        whatsapp: "WhatsApp",
        instagram: "Instagram",
        
        // Footer
        footerText: "© 2024 Ola Innovadora. Todos los derechos reservados.",
        
        // Modal
        modalTitle: "Reservar apartamento",
        modalDescription: "Para reservar, contáctenos a través de su mensajero preferido:",
        modalTelegram: "Escribir en Telegram",
        modalWhatsApp: "Escribir en WhatsApp",
        modalNote: "Mencione el nombre del apartamento al contactarnos",
        modalPriceLabel: "Precio:",
        
        // Apartment details
        detailsDescription: "Descripción",
        detailsIncluded: "Qué incluye:",
        detailsLocation: "Ubicación:",
        detailsBookingNote: "Contáctenos para confirmar fechas y detalles",
        
        // Feature details
        featureComfortableBeds: "Camas cómodas",
        featureComfortableStudio: "Estudio cómodo",
        featurePremiumInterior: "Interior premium",
        featureIdealForFamily: "Ideal para familia",
        featureIdealForCouple: "Ideal para pareja",
        featureIdealForCompany: "Para grupo grande",
        featureHighSpeed: "Alta velocidad",
        featureSharedPool: "Piscina compartida",
        featureOnTerrace: "En terraza",
        featurePanoramicView: "Vista panorámica",
        featurePanoramicWindows: "Ventanas panorámicas",
        featureMetersFromBeach: "200 metros"
    }
};

// Get current language from localStorage or default to Russian
let currentLang = localStorage.getItem('language') || 'ru';

// Function to get translation
function t(key) {
    return translations[currentLang][key] || key;
}

// Function to change language
function changeLanguage(lang) {
    currentLang = lang;
    localStorage.setItem('language', lang);
    updatePageContent();
    
    // Update active language button
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    document.querySelector(`[data-lang="${lang}"]`)?.classList.add('active');
}

// Function to update page content
function updatePageContent() {
    // Update all elements with data-i18n attribute
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        const translation = t(key);
        
        if (element.tagName === 'INPUT' || element.tagName === 'SELECT') {
            element.placeholder = translation;
        } else {
            element.textContent = translation;
        }
    });
    
    // Auto-translate common patterns
    autoTranslateContent();
}

// Auto-translate function for dynamic content
function autoTranslateContent() {
    const lang = currentLang;
    
    // Translate hero section
    const heroTitle = document.querySelector('.hero-content h2');
    if (heroTitle && !heroTitle.hasAttribute('data-i18n')) {
        heroTitle.textContent = t('heroTitle');
    }
    
    const heroSubtitle = document.querySelector('.hero-content p');
    if (heroSubtitle && !heroSubtitle.hasAttribute('data-i18n')) {
        heroSubtitle.textContent = t('heroSubtitle');
    }
    
    // Translate filter labels
    document.querySelectorAll('.filter-item label').forEach((label, index) => {
        if (!label.hasAttribute('data-i18n')) {
            const keys = ['filterLocation', 'filterGuests', 'filterPrice'];
            if (keys[index]) {
                label.textContent = t(keys[index]);
            }
        }
    });
    
    // Translate filter button
    const filterBtn = document.querySelector('.filter-btn');
    if (filterBtn && !filterBtn.hasAttribute('data-i18n')) {
        filterBtn.innerHTML = `<i class="fas fa-search"></i> ${t('filterButton')}`;
    }
    
    // Translate select options
    translateSelectOptions();
    
    // Translate apartment names
    translateApartmentNames();
    
    // Translate badges
    document.querySelectorAll('.apartment-badge').forEach(badge => {
        if (badge.textContent.includes('Популярное') || badge.textContent.includes('Popular')) {
            badge.textContent = t('popular');
        } else if (badge.textContent.includes('Премиум') || badge.textContent.includes('Premium')) {
            badge.textContent = t('premium');
        }
    });
    
    // Translate "per night"
    document.querySelectorAll('.period').forEach(period => {
        period.textContent = t('perNight');
    });
    
    // Translate book buttons
    document.querySelectorAll('.book-btn').forEach(btn => {
        if (!btn.onclick || btn.onclick.toString().includes('openBookingModal')) {
            const icon = btn.querySelector('i');
            btn.innerHTML = `${icon ? icon.outerHTML : '<i class="fab fa-telegram"></i>'} ${t('bookButton')}`;
        }
    });
    
    // Translate about section
    const aboutTitle = document.querySelector('.about h2');
    if (aboutTitle && !aboutTitle.hasAttribute('data-i18n')) {
        aboutTitle.textContent = t('aboutTitle');
    }
    
    // Translate about items
    const aboutItems = document.querySelectorAll('.about-item');
    const aboutKeys = ['aboutReliability', 'aboutBestPrices', 'aboutSupport', 'aboutLocations'];
    const aboutTextKeys = ['aboutReliabilityText', 'aboutBestPricesText', 'aboutSupportText', 'aboutLocationsText'];
    aboutItems.forEach((item, index) => {
        const h3 = item.querySelector('h3');
        const p = item.querySelector('p');
        if (h3 && aboutKeys[index]) h3.textContent = t(aboutKeys[index]);
        if (p && aboutTextKeys[index]) p.textContent = t(aboutTextKeys[index]);
    });
    
    // Translate contact section
    const contactTitle = document.querySelector('.contact h2');
    const contactSubtitle = document.querySelector('.contact > p');
    if (contactTitle && !contactTitle.hasAttribute('data-i18n')) {
        contactTitle.textContent = t('contactTitle');
    }
    if (contactSubtitle && !contactSubtitle.hasAttribute('data-i18n')) {
        contactSubtitle.textContent = t('contactSubtitle');
    }
    
    // Translate footer
    const footer = document.querySelector('.footer p');
    if (footer && !footer.hasAttribute('data-i18n')) {
        footer.textContent = t('footerText');
    }
}

function translateSelectOptions() {
    // Location select
    const locationSelect = document.getElementById('location');
    if (locationSelect) {
        locationSelect.options[0].text = t('filterAllLocations');
        locationSelect.options[1].text = t('locationLosCristianos');
        locationSelect.options[2].text = t('locationPlayaAmericas');
        locationSelect.options[3].text = t('locationCostaAdeje');
        locationSelect.options[4].text = t('locationPuertoCruz');
    }
    
    // Guests select
    const guestsSelect = document.getElementById('guests');
    if (guestsSelect) {
        guestsSelect.options[0].text = t('filterAnyGuests');
    }
    
    // Price select
    const priceSelect = document.getElementById('price');
    if (priceSelect) {
        priceSelect.options[0].text = t('filterAnyPrice');
    }
}

function translateApartmentNames() {
    const cards = document.querySelectorAll('.apartment-card h3');
    const aptNames = ['apt1Name', 'apt2Name', 'apt3Name', 'apt4Name', 'apt5Name', 'apt6Name'];
    
    cards.forEach((card, index) => {
        if (aptNames[index] && !card.hasAttribute('data-i18n')) {
            card.textContent = t(aptNames[index]);
        }
    });
    
    // Translate locations in cards
    document.querySelectorAll('.apartment-card .location, .apartment-detail-info .location').forEach(loc => {
        if (loc.textContent.includes('Лос-Кристианос') || loc.textContent.includes('Los Cristianos')) {
            loc.innerHTML = `<i class="fas fa-map-marker-alt"></i> ${t('locationLosCristianos')}`;
        } else if (loc.textContent.includes('Плайя') || loc.textContent.includes('Playa')) {
            loc.innerHTML = `<i class="fas fa-map-marker-alt"></i> ${t('locationPlayaAmericas')}`;
        } else if (loc.textContent.includes('Коста') || loc.textContent.includes('Costa')) {
            loc.innerHTML = `<i class="fas fa-map-marker-alt"></i> ${t('locationCostaAdeje')}`;
        } else if (loc.textContent.includes('Пуэрто') || loc.textContent.includes('Puerto')) {
            loc.innerHTML = `<i class="fas fa-map-marker-alt"></i> ${t('locationPuertoCruz')}`;
        }
    });
}